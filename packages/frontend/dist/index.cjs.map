{"version":3,"sources":["../src/components/ImageEditor.tsx","../src/utils/imageCompression.ts","../src/components/ImageCropper.tsx","../src/components/ImageEditorLazy.tsx","../src/components/S3Uploader.tsx","../src/utils/api.ts"],"names":["TABS","TOOLS","jsx","FilerobotImageEditor","imageCompression","useState","useRef","useCallback","jsxs","ReactCrop","React","useEffect"],"mappings":"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","file":"index.cjs","sourcesContent":["import FilerobotImageEditor, { TABS, TOOLS } from 'react-filerobot-image-editor';\nimport type { ImageEditorProps } from '../types';\n\nexport function ImageEditor({\n  src,\n  onSave,\n  onClose,\n  defaultTab = 'Adjust',\n  enabledTabs = ['Adjust', 'Filters', 'Finetune', 'Resize', 'Annotate'],\n  cropPresets,\n  aspectRatioLocked = false,\n  defaultAspectRatio,\n}: ImageEditorProps) {\n  // Map string tab names to TABS enum\n  const tabsIds = enabledTabs.map((tab) => {\n    switch (tab) {\n      case 'Adjust':\n        return TABS.ADJUST;\n      case 'Filters':\n        return TABS.FILTERS;\n      case 'Finetune':\n        return TABS.FINETUNE;\n      case 'Resize':\n        return TABS.RESIZE;\n      case 'Annotate':\n        return TABS.ANNOTATE;\n      case 'Watermark':\n        return TABS.WATERMARK;\n      default:\n        return TABS.ADJUST;\n    }\n  });\n\n  const defaultTabId = (() => {\n    switch (defaultTab) {\n      case 'Adjust':\n        return TABS.ADJUST;\n      case 'Filters':\n        return TABS.FILTERS;\n      case 'Finetune':\n        return TABS.FINETUNE;\n      case 'Resize':\n        return TABS.RESIZE;\n      case 'Annotate':\n        return TABS.ANNOTATE;\n      case 'Watermark':\n        return TABS.WATERMARK;\n      default:\n        return TABS.ADJUST;\n    }\n  })();\n\n  const handleSave = (editedImageObject: { imageBase64?: string; fullName?: string; mimeType?: string }) => {\n    if (!editedImageObject.imageBase64) return;\n\n    // Convert base64 to Blob\n    const base64Data = editedImageObject.imageBase64.split(',')[1];\n    const mimeType = editedImageObject.mimeType || 'image/jpeg';\n    const byteCharacters = atob(base64Data);\n    const byteNumbers = new Array(byteCharacters.length);\n    for (let i = 0; i < byteCharacters.length; i++) {\n      byteNumbers[i] = byteCharacters.charCodeAt(i);\n    }\n    const byteArray = new Uint8Array(byteNumbers);\n    const blob = new Blob([byteArray], { type: mimeType });\n\n    onSave(blob, editedImageObject.fullName || 'edited-image');\n  };\n\n  // Build crop presets configuration\n  const cropConfig: Record<string, unknown> = {\n    autoResize: true,\n  };\n\n  if (aspectRatioLocked && defaultAspectRatio) {\n    cropConfig.ratio = defaultAspectRatio;\n    cropConfig.noPresets = true;\n  } else if (cropPresets && cropPresets.length > 0) {\n    cropConfig.presetsItems = cropPresets.map((preset) => ({\n      titleKey: preset.label,\n      ratio: preset.ratio,\n      width: preset.width,\n      height: preset.height,\n    }));\n  }\n\n  return (\n    <div\n      className=\"image-editor-overlay\"\n      style={{\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        width: '100vw',\n        height: '100vh',\n        zIndex: 99999,\n        backgroundColor: '#1a1a1a',\n      }}\n    >\n      <FilerobotImageEditor\n        source={src}\n        onSave={handleSave}\n        onClose={onClose}\n        tabsIds={tabsIds}\n        defaultTabId={defaultTabId}\n        defaultToolId={TOOLS.CROP}\n        savingPixelRatio={4}\n        previewPixelRatio={window.devicePixelRatio}\n        Crop={cropConfig}\n        Rotate={{\n          componentType: 'slider',\n        }}\n        Text={{ text: '' }}\n      />\n    </div>\n  );\n}\n\nexport { TABS, TOOLS };\n","import imageCompression from 'browser-image-compression';\n\nexport interface CompressionOptions {\n  maxSizeMB?: number;\n  maxWidthOrHeight?: number;\n  useWebWorker?: boolean;\n}\n\nconst DEFAULT_OPTIONS: CompressionOptions = {\n  maxSizeMB: 2,\n  maxWidthOrHeight: 1920,\n  useWebWorker: true,\n};\n\nconst ALLOWED_TYPES = ['image/jpeg', 'image/png', 'image/gif', 'image/webp'];\n\nexport async function compressImage(\n  file: File,\n  options: CompressionOptions = {}\n): Promise<File> {\n  // Validate file type\n  if (!ALLOWED_TYPES.includes(file.type)) {\n    throw new Error('Invalid file type. Allowed types: JPEG, PNG, GIF, WebP');\n  }\n\n  const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\n  const maxSizeBytes = (mergedOptions.maxSizeMB || 2) * 1024 * 1024;\n\n  // If file is already under the threshold, return as-is\n  if (file.size <= maxSizeBytes) {\n    return file;\n  }\n\n  // Compress the image\n  const compressedFile = await imageCompression(file, {\n    maxSizeMB: mergedOptions.maxSizeMB,\n    maxWidthOrHeight: mergedOptions.maxWidthOrHeight,\n    useWebWorker: mergedOptions.useWebWorker,\n  });\n\n  return compressedFile;\n}\n","import { useState, useRef, useCallback } from 'react';\nimport ReactCrop, { Crop, PixelCrop } from 'react-image-crop';\nimport 'react-image-crop/dist/ReactCrop.css';\n\nexport interface ImageCropperProps {\n  src: string;\n  onCropComplete: (croppedImageBlob: Blob) => void;\n  onCancel: () => void;\n  aspectRatio?: number;\n}\n\nexport function ImageCropper({\n  src,\n  onCropComplete,\n  onCancel,\n  aspectRatio,\n}: ImageCropperProps) {\n  const [crop, setCrop] = useState<Crop>({\n    unit: '%',\n    x: 10,\n    y: 10,\n    width: 80,\n    height: 80,\n  });\n  const [completedCrop, setCompletedCrop] = useState<PixelCrop | null>(null);\n  const imgRef = useRef<HTMLImageElement>(null);\n\n  const handleCropChange = useCallback((c: Crop) => {\n    setCrop(c);\n  }, []);\n\n  const handleCropComplete = useCallback((c: PixelCrop) => {\n    setCompletedCrop(c);\n  }, []);\n\n  const getCroppedImage = useCallback(async (): Promise<Blob | null> => {\n    if (!completedCrop || !imgRef.current) {\n      return null;\n    }\n\n    const image = imgRef.current;\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d');\n\n    if (!ctx) {\n      return null;\n    }\n\n    const scaleX = image.naturalWidth / image.width;\n    const scaleY = image.naturalHeight / image.height;\n\n    canvas.width = completedCrop.width;\n    canvas.height = completedCrop.height;\n\n    ctx.drawImage(\n      image,\n      completedCrop.x * scaleX,\n      completedCrop.y * scaleY,\n      completedCrop.width * scaleX,\n      completedCrop.height * scaleY,\n      0,\n      0,\n      completedCrop.width,\n      completedCrop.height\n    );\n\n    return new Promise((resolve) => {\n      canvas.toBlob(\n        (blob) => {\n          resolve(blob);\n        },\n        'image/jpeg',\n        0.95\n      );\n    });\n  }, [completedCrop]);\n\n  const handleConfirm = useCallback(async () => {\n    const croppedBlob = await getCroppedImage();\n    if (croppedBlob) {\n      onCropComplete(croppedBlob);\n    }\n  }, [getCroppedImage, onCropComplete]);\n\n  return (\n    <div className=\"image-cropper\">\n      <div className=\"image-cropper__container\">\n        <ReactCrop\n          crop={crop}\n          onChange={handleCropChange}\n          onComplete={handleCropComplete}\n          aspect={aspectRatio}\n        >\n          <img\n            ref={imgRef}\n            src={src}\n            alt=\"Crop preview\"\n            style={{ maxWidth: '100%', maxHeight: '70vh' }}\n          />\n        </ReactCrop>\n      </div>\n      <div className=\"image-cropper__actions\">\n        <button\n          type=\"button\"\n          onClick={onCancel}\n          className=\"image-cropper__button image-cropper__button--cancel\"\n        >\n          Cancel\n        </button>\n        <button\n          type=\"button\"\n          onClick={handleConfirm}\n          className=\"image-cropper__button image-cropper__button--confirm\"\n        >\n          Crop\n        </button>\n      </div>\n    </div>\n  );\n}\n","/**\n * ImageEditorLazy - Dynamic loader for ImageEditor\n * Handles the \"React is not defined\" issue in Next.js production builds\n */\nimport React, { useEffect, useState } from 'react';\nimport type { ImageEditorProps } from '../types';\n\n// Make React available globally for react-filerobot-image-editor\nif (typeof window !== 'undefined') {\n  (window as unknown as { React: typeof React }).React = React;\n}\n\nexport function ImageEditorLazy(props: ImageEditorProps) {\n  const [EditorComponent, setEditorComponent] = useState<React.ComponentType<ImageEditorProps> | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    // Only load on client side\n    if (typeof window === 'undefined') return;\n\n    // Ensure React is globally available before importing\n    (window as unknown as { React: typeof React }).React = React;\n\n    import('./ImageEditor')\n      .then((mod) => {\n        setEditorComponent(() => mod.ImageEditor);\n        setLoading(false);\n      })\n      .catch((err) => {\n        console.error('Failed to load ImageEditor:', err);\n        setError('Failed to load image editor');\n        setLoading(false);\n      });\n  }, []);\n\n  if (loading) {\n    return (\n      <div style={{\n        height: '100vh',\n        width: '100%',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        backgroundColor: '#1a1a1a',\n        color: '#fff',\n      }}>\n        <div style={{ textAlign: 'center' }}>\n          <div style={{\n            width: '40px',\n            height: '40px',\n            border: '3px solid #333',\n            borderTopColor: '#fff',\n            borderRadius: '50%',\n            animation: 'spin 1s linear infinite',\n            margin: '0 auto 16px',\n          }} />\n          <style>{`@keyframes spin { to { transform: rotate(360deg); } }`}</style>\n          <p>Loading editor...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (error || !EditorComponent) {\n    return (\n      <div style={{\n        padding: '20px',\n        textAlign: 'center',\n        backgroundColor: '#fee',\n        color: '#c00',\n        borderRadius: '8px',\n      }}>\n        <p>{error || 'Failed to load editor'}</p>\n        <button\n          onClick={props.onClose}\n          style={{\n            marginTop: '10px',\n            padding: '8px 16px',\n            cursor: 'pointer',\n          }}\n        >\n          Close\n        </button>\n      </div>\n    );\n  }\n\n  return <EditorComponent {...props} />;\n}\n","import React, { useState, useCallback, useRef } from 'react';\nimport { compressImage } from '../utils/imageCompression';\nimport { ImageCropper } from './ImageCropper';\nimport { ImageEditorLazy } from './ImageEditorLazy';\nimport type { S3UploaderProps, PresignedUrlResponse } from '../types';\n\ntype UploadStatus = 'idle' | 'compressing' | 'editing' | 'uploading' | 'success' | 'error';\n\nexport function S3Uploader({\n  apiEndpoint,\n  apiKey,\n  projectCode,\n  ownerKey,\n  folder,\n  tags,\n  cloudfrontDomain,\n  onUploadComplete,\n  onUploadError,\n  onProgress,\n  maxFileSizeMB = 10,\n  allowedFileTypes = ['image/jpeg', 'image/png', 'image/gif', 'image/webp'],\n  enableCrop = false,\n  enableEditor = false,\n  enableCompression = true,\n  compressionOptions = { maxSizeMB: 2, maxWidthOrHeight: 1920 },\n  enableDragDrop = true,\n  editorConfig,\n}: S3UploaderProps) {\n  // Support legacy enableCrop prop\n  const editorEnabled = enableEditor || enableCrop;\n\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\n  const [previewUrl, setPreviewUrl] = useState<string | null>(null);\n  const [status, setStatus] = useState<UploadStatus>('idle');\n  const [progress, setProgress] = useState(0);\n  const [errorMessage, setErrorMessage] = useState<string | null>(null);\n  const [isEditorOpen, setIsEditorOpen] = useState(false);\n  const [isDragOver, setIsDragOver] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const processFile = useCallback(\n    (file: File) => {\n      // Validate file type\n      if (!allowedFileTypes.includes(file.type)) {\n        setErrorMessage(`Invalid file type. Allowed: ${allowedFileTypes.join(', ')}`);\n        return;\n      }\n\n      // Validate file size\n      if (file.size > maxFileSizeMB * 1024 * 1024) {\n        setErrorMessage(`File too large. Maximum size: ${maxFileSizeMB}MB`);\n        return;\n      }\n\n      setSelectedFile(file);\n      setErrorMessage(null);\n\n      // Create preview URL\n      const url = URL.createObjectURL(file);\n      setPreviewUrl(url);\n\n      // Show editor if enabled\n      if (editorEnabled) {\n        setIsEditorOpen(true);\n      }\n    },\n    [allowedFileTypes, maxFileSizeMB, editorEnabled]\n  );\n\n  const handleFileSelect = useCallback(\n    async (event: React.ChangeEvent<HTMLInputElement>) => {\n      const file = event.target.files?.[0];\n      if (!file) return;\n      processFile(file);\n    },\n    [processFile]\n  );\n\n  const handleDragOver = useCallback((event: React.DragEvent<HTMLDivElement>) => {\n    event.preventDefault();\n    event.stopPropagation();\n    setIsDragOver(true);\n  }, []);\n\n  const handleDragLeave = useCallback((event: React.DragEvent<HTMLDivElement>) => {\n    event.preventDefault();\n    event.stopPropagation();\n    setIsDragOver(false);\n  }, []);\n\n  const handleDrop = useCallback(\n    (event: React.DragEvent<HTMLDivElement>) => {\n      event.preventDefault();\n      event.stopPropagation();\n      setIsDragOver(false);\n\n      const file = event.dataTransfer.files?.[0];\n      if (!file) return;\n      processFile(file);\n    },\n    [processFile]\n  );\n\n  const handleEditorSave = useCallback((blob: Blob, fileName: string) => {\n    const editedFile = new File([blob], fileName || selectedFile?.name || 'edited.jpg', {\n      type: blob.type || 'image/jpeg',\n    });\n    setSelectedFile(editedFile);\n    setPreviewUrl(URL.createObjectURL(blob));\n    setIsEditorOpen(false);\n  }, [selectedFile]);\n\n  const handleEditorClose = useCallback(() => {\n    setIsEditorOpen(false);\n  }, []);\n\n  // Legacy support for ImageCropper\n  const handleCropComplete = useCallback((croppedBlob: Blob) => {\n    handleEditorSave(croppedBlob, selectedFile?.name || 'cropped.jpg');\n  }, [handleEditorSave, selectedFile]);\n\n  const handleCropCancel = useCallback(() => {\n    setIsEditorOpen(false);\n  }, []);\n\n  const getPresignedUrl = async (fileName: string, contentType: string): Promise<PresignedUrlResponse> => {\n    const requestBody: Record<string, unknown> = {\n      fileName,\n      contentType,\n      projectCode,\n      ownerKey,\n    };\n    if (folder) {\n      requestBody.folder = folder;\n    }\n    if (tags && Object.keys(tags).length > 0) {\n      requestBody.tags = tags;\n    }\n\n    const response = await fetch(`${apiEndpoint}/presigned-url`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'X-Api-Key': apiKey,\n      },\n      body: JSON.stringify(requestBody),\n    });\n\n    if (!response.ok) {\n      throw new Error(`Failed to get presigned URL: ${response.status}`);\n    }\n\n    return response.json();\n  };\n\n  const uploadToS3 = async (uploadUrl: string, file: File): Promise<void> => {\n    const response = await fetch(uploadUrl, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': file.type,\n      },\n      body: file,\n    });\n\n    if (!response.ok) {\n      throw new Error(`Upload failed: ${response.status}`);\n    }\n  };\n\n  const handleUpload = useCallback(async () => {\n    if (!selectedFile) return;\n\n    try {\n      setStatus('compressing');\n      setProgress(10);\n      onProgress?.(10);\n\n      // Compress image if enabled\n      let fileToUpload = selectedFile;\n      if (enableCompression && selectedFile.type.startsWith('image/')) {\n        fileToUpload = await compressImage(selectedFile, compressionOptions);\n      }\n\n      setStatus('uploading');\n      setProgress(30);\n      onProgress?.(30);\n\n      // Get presigned URL\n      const { uploadUrl, fileUrl, key } = await getPresignedUrl(\n        fileToUpload.name,\n        fileToUpload.type\n      );\n\n      setProgress(50);\n      onProgress?.(50);\n\n      // Upload to S3\n      await uploadToS3(uploadUrl, fileToUpload);\n\n      setProgress(100);\n      onProgress?.(100);\n      setStatus('success');\n\n      // Return CloudFront URL if domain is provided, otherwise S3 URL\n      const finalUrl = cloudfrontDomain\n        ? `https://${cloudfrontDomain.replace(/^https?:\\/\\//, '')}/${key}`\n        : fileUrl;\n      onUploadComplete?.(finalUrl);\n    } catch (error) {\n      setStatus('error');\n      const errorObj = error instanceof Error ? error : new Error('Unknown error');\n      setErrorMessage(errorObj.message);\n      onUploadError?.(errorObj);\n    }\n  }, [\n    selectedFile,\n    enableCompression,\n    compressionOptions,\n    apiEndpoint,\n    apiKey,\n    cloudfrontDomain,\n    onUploadComplete,\n    onUploadError,\n    onProgress,\n  ]);\n\n  const handleReset = useCallback(() => {\n    setSelectedFile(null);\n    setPreviewUrl(null);\n    setStatus('idle');\n    setProgress(0);\n    setErrorMessage(null);\n    setIsEditorOpen(false);\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  }, []);\n\n  // Show full image editor if enabled (lazy loaded for Next.js compatibility)\n  if (isEditorOpen && previewUrl && enableEditor) {\n    return (\n      <ImageEditorLazy\n        src={previewUrl}\n        onSave={handleEditorSave}\n        onClose={handleEditorClose}\n        defaultTab={editorConfig?.defaultTab}\n        enabledTabs={editorConfig?.enabledTabs}\n        cropPresets={editorConfig?.cropPresets}\n        aspectRatioLocked={editorConfig?.aspectRatioLocked}\n        defaultAspectRatio={editorConfig?.defaultAspectRatio}\n      />\n    );\n  }\n\n  // Legacy: Show simple cropper if enableCrop is used\n  if (isEditorOpen && previewUrl && enableCrop && !enableEditor) {\n    return (\n      <ImageCropper\n        src={previewUrl}\n        onCropComplete={handleCropComplete}\n        onCancel={handleCropCancel}\n      />\n    );\n  }\n\n  const dropZoneStyle: React.CSSProperties = {\n    border: `2px dashed ${isDragOver ? '#2196F3' : '#ccc'}`,\n    borderRadius: '8px',\n    padding: '40px 20px',\n    textAlign: 'center',\n    backgroundColor: isDragOver ? '#e3f2fd' : '#fafafa',\n    transition: 'all 0.2s ease',\n    cursor: 'pointer',\n    marginBottom: '16px',\n  };\n\n  const dropZoneIconStyle: React.CSSProperties = {\n    fontSize: '48px',\n    marginBottom: '8px',\n    color: isDragOver ? '#2196F3' : '#999',\n  };\n\n  const dropZoneTextStyle: React.CSSProperties = {\n    margin: 0,\n    color: isDragOver ? '#2196F3' : '#666',\n    fontSize: '14px',\n  };\n\n  const dropZoneClassName = [\n    's3-uploader__drop-zone',\n    isDragOver ? 's3-uploader--drag-over' : '',\n  ].filter(Boolean).join(' ');\n\n  return (\n    <div className=\"s3-uploader\">\n      {enableDragDrop && (\n        <div\n          className={dropZoneClassName}\n          style={dropZoneStyle}\n          onDragOver={handleDragOver}\n          onDragEnter={handleDragOver}\n          onDragLeave={handleDragLeave}\n          onDrop={handleDrop}\n          onClick={() => fileInputRef.current?.click()}\n          data-testid=\"drop-zone\"\n        >\n          <div style={dropZoneIconStyle}>\n            {isDragOver ? 'üì•' : 'üìÅ'}\n          </div>\n          <p style={dropZoneTextStyle}>\n            {isDragOver ? 'Drop to upload' : 'Drag & drop image here, or click to select'}\n          </p>\n        </div>\n      )}\n\n      <div className=\"s3-uploader__input-container\">\n        <label htmlFor=\"file-input\" className=\"s3-uploader__label\">\n          Select File\n        </label>\n        <input\n          ref={fileInputRef}\n          id=\"file-input\"\n          type=\"file\"\n          accept=\"image/*\"\n          onChange={handleFileSelect}\n          className=\"s3-uploader__input\"\n          disabled={status === 'uploading' || status === 'compressing'}\n        />\n      </div>\n\n      {previewUrl && !isEditorOpen && (\n        <div className=\"s3-uploader__preview\">\n          <img\n            src={previewUrl}\n            alt=\"Preview\"\n            className=\"s3-uploader__preview-image\"\n            style={{ maxWidth: '200px', maxHeight: '200px' }}\n          />\n        </div>\n      )}\n\n      {errorMessage && (\n        <div className=\"s3-uploader__error\" role=\"alert\">\n          {errorMessage}\n        </div>\n      )}\n\n      {status === 'uploading' || status === 'compressing' ? (\n        <div className=\"s3-uploader__progress\">\n          <progress\n            value={progress}\n            max={100}\n            className=\"s3-uploader__progress-bar\"\n            role=\"progressbar\"\n            aria-valuenow={progress}\n            aria-valuemin={0}\n            aria-valuemax={100}\n          />\n          <span className=\"s3-uploader__progress-text\">{progress}%</span>\n        </div>\n      ) : null}\n\n      {status === 'success' && (\n        <div className=\"s3-uploader__success\" role=\"status\">\n          Upload complete!\n        </div>\n      )}\n\n      <div className=\"s3-uploader__actions\">\n        <button\n          type=\"button\"\n          onClick={handleUpload}\n          disabled={!selectedFile || status === 'uploading' || status === 'compressing'}\n          className=\"s3-uploader__button s3-uploader__button--upload\"\n        >\n          Upload\n        </button>\n        {(selectedFile || status === 'success' || status === 'error') && (\n          <button\n            type=\"button\"\n            onClick={handleReset}\n            className=\"s3-uploader__button s3-uploader__button--reset\"\n          >\n            Reset\n          </button>\n        )}\n      </div>\n    </div>\n  );\n}\n","import type { DeleteObjectResponse, ListObjectsResponse, ListObjectsParams } from '../types';\n\nexport interface DeleteObjectParams {\n  apiEndpoint: string;\n  apiKey: string;\n  key: string;\n}\n\nexport async function deleteObject(params: DeleteObjectParams): Promise<DeleteObjectResponse> {\n  const { apiEndpoint, apiKey, key } = params;\n\n  const response = await fetch(`${apiEndpoint}/objects`, {\n    method: 'DELETE',\n    headers: {\n      'Content-Type': 'application/json',\n      'X-Api-Key': apiKey,\n    },\n    body: JSON.stringify({ key }),\n  });\n\n  if (!response.ok) {\n    throw new Error(`Failed to delete object: ${response.status}`);\n  }\n\n  return response.json();\n}\n\nexport async function listObjects(params: ListObjectsParams): Promise<ListObjectsResponse> {\n  const { apiEndpoint, apiKey, projectCode, ownerKey, folder, limit, cursor, includeTags } = params;\n\n  const searchParams = new URLSearchParams();\n  searchParams.set('projectCode', projectCode);\n  if (ownerKey) searchParams.set('ownerKey', ownerKey);\n  if (folder) searchParams.set('folder', folder);\n  if (limit) searchParams.set('limit', String(limit));\n  if (cursor) searchParams.set('cursor', cursor);\n  if (includeTags) searchParams.set('includeTags', 'true');\n\n  const response = await fetch(`${apiEndpoint}/objects?${searchParams.toString()}`, {\n    method: 'GET',\n    headers: {\n      'X-Api-Key': apiKey,\n    },\n  });\n\n  if (!response.ok) {\n    throw new Error(`Failed to list objects: ${response.status}`);\n  }\n\n  return response.json();\n}\n"]}